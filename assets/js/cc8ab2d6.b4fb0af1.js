"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[8574],{28453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>a});var r=s(96540);const i={},o=r.createContext(i);function t(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),r.createElement(o.Provider,{value:n},e.children)}},47550:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>p,frontMatter:()=>t,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"advanced/prepare","title":"What is hyprdynamicmonitors prepare?","description":"The prepare command cleans up your monitor configuration file before Hyprland starts, preventing the \\"no active displays\\" issue that can leave Hyprland in an unusable state.","source":"@site/versioned_docs/version-v1.4.0/advanced/prepare.md","sourceDirName":"advanced","slug":"/advanced/prepare","permalink":"/docs/advanced/prepare","draft":false,"unlisted":false,"editUrl":"https://github.com/fiffeek/hyprdynamicmonitors/tree/main/docs/versioned_docs/version-v1.4.0/advanced/prepare.md","tags":[],"version":"v1.4.0","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Running with systemd","permalink":"/docs/advanced/systemd"},"next":{"title":"FAQ","permalink":"/docs/faq"}}');var i=s(74848),o=s(28453);const t={sidebar_position:4},a="What is hyprdynamicmonitors prepare?",d={},l=[{value:"The Problem",id:"the-problem",level:2},{value:"The Solution",id:"the-solution",level:2},{value:"How to run <code>hyprdynamicmonitors prepare</code>",id:"how-to-run-hyprdynamicmonitors-prepare",level:2},{value:"Option 1: Using systemd (Recommended)",id:"option-1-using-systemd-recommended",level:3},{value:"Option 2: Manual execution (Non-systemd)",id:"option-2-manual-execution-non-systemd",level:3},{value:"See Also",id:"see-also",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsxs)(n.h1,{id:"what-is-hyprdynamicmonitors-prepare",children:["What is ",(0,i.jsx)(n.code,{children:"hyprdynamicmonitors prepare"}),"?"]})}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"prepare"}),' command cleans up your monitor configuration file before Hyprland starts, preventing the "no active displays" issue that can leave Hyprland in an unusable state.']}),"\n",(0,i.jsx)(n.h2,{id:"the-problem",children:"The Problem"}),"\n",(0,i.jsxs)(n.p,{children:["Hyprland currently has a limitation where it cannot start if all monitors are disabled at launch. You can read more about it ",(0,i.jsx)(n.a,{href:"https://github.com/hyprwm/Hyprland/discussions/12325#discussioncomment-15004584",children:"here"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["This affects ",(0,i.jsx)(n.code,{children:"hyprdynamicmonitors"})," users who disable monitors in their profiles. For example:"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["You're using external displays with your laptop screen disabled (",(0,i.jsx)(n.code,{children:"monitor=eDP-1,disable"}),")"]}),"\n",(0,i.jsx)(n.li,{children:"You power off and unplug all external displays"}),"\n",(0,i.jsx)(n.li,{children:"You try to start your laptop the next day"}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Result"}),": Hyprland shows a blank screen and won't start because the configuration file still has the laptop screen disabled, even though ",(0,i.jsx)(n.code,{children:"hyprdynamicmonitors"})," would correctly reconfigure the monitors once running"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"the-solution",children:"The Solution"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"prepare"})," command removes all ",(0,i.jsx)(n.code,{children:"monitor=...,disable"})," lines from your destination file (",(0,i.jsx)(n.code,{children:"config.general.destination"}),") before Hyprland starts. This ensures:"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Hyprland starts successfully with a clean monitor configuration"}),"\n",(0,i.jsxs)(n.li,{children:["Once Hyprland is running, ",(0,i.jsx)(n.code,{children:"hyprdynamicmonitors run"})," (if enabled) automatically applies the correct profile"]}),"\n",(0,i.jsx)(n.li,{children:"If not using the daemon, you can adjust settings manually in the TUI"}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsxs)(n.p,{children:["This is only relevant if you disable monitors in your profiles. If you don't use ",(0,i.jsx)(n.code,{children:"monitor=...,disable"})," in any configuration, you don't need the prepare command."]})}),"\n",(0,i.jsxs)(n.p,{children:["For command-line options and examples, see the ",(0,i.jsx)(n.a,{href:"../usage/commands#prepare",children:"prepare command documentation"}),"."]}),"\n",(0,i.jsxs)(n.h2,{id:"how-to-run-hyprdynamicmonitors-prepare",children:["How to run ",(0,i.jsx)(n.code,{children:"hyprdynamicmonitors prepare"})]}),"\n",(0,i.jsx)(n.h3,{id:"option-1-using-systemd-recommended",children:"Option 1: Using systemd (Recommended)"}),"\n",(0,i.jsxs)(n.p,{children:["If you're using the ",(0,i.jsx)(n.code,{children:"hyprdynamicmonitors.service"})," systemd service, enable the prepare service:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"systemctl --user enable hyprdynamicmonitors-prepare.service\n"})}),"\n",(0,i.jsx)(n.p,{children:"The service definition ensures it runs before the graphical session starts. The service has a 3-second timeout, so Hyprland will start even if the prepare command takes longer than expected."}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.p,{children:["See the ",(0,i.jsx)(n.a,{href:"./systemd",children:"systemd documentation"})," for complete setup instructions, including both the daemon and prepare services."]})}),"\n",(0,i.jsx)(n.h3,{id:"option-2-manual-execution-non-systemd",children:"Option 2: Manual execution (Non-systemd)"}),"\n",(0,i.jsxs)(n.p,{children:["If you're running Hyprland manually (e.g., from TTY) or using ",(0,i.jsx)(n.code,{children:"exec-once"})," for ",(0,i.jsx)(n.code,{children:"hyprdynamicmonitors"}),", ensure ",(0,i.jsx)(n.code,{children:"prepare"})," runs before Hyprland starts."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Using a shell alias:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Add to ~/.bashrc or ~/.zshrc\nalias hyprstart="hyprdynamicmonitors prepare && Hyprland"\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"In an existing startup script:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"#!/bin/bash\n# Your existing setup commands\nkillall waybar  # example cleanup\n\n# Add prepare before launching Hyprland\nhyprdynamicmonitors prepare\nHyprland\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Direct command:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"hyprdynamicmonitors prepare && Hyprland\n"})}),"\n",(0,i.jsxs)(n.p,{children:["You might still, in most cases, be able to just enable the ",(0,i.jsx)(n.code,{children:"systemd"})," ",(0,i.jsx)(n.code,{children:"hyprdynamicmonitors-prepare"})," service since it runs on boot (pulled by ",(0,i.jsx)(n.code,{children:"default.target"}),"):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"systemctl --user enable hyprdynamicmonitors-prepare.service\n"})}),"\n",(0,i.jsx)(n.p,{children:"But due to relying on timing (you entering the Hyprland session after this runs) adding it to your startup routine is more robust."}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsxs)(n.p,{children:["The prepare command is fast (typically completes in milliseconds) and safe to run multiple times. It only modifies your destination file when it finds ",(0,i.jsx)(n.code,{children:"monitor=...,disable"})," lines to remove."]})}),"\n",(0,i.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"../quickstart/setup-approaches",children:"Setup Approaches"})," - Initial setup guide with prepare integration"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"../usage/commands#prepare",children:"CLI Commands"})," - Command-line options and examples"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"./systemd",children:"Running with systemd"})," - Complete systemd service setup"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}}}]);